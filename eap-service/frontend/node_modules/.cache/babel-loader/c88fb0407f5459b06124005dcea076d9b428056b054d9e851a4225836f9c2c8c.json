{"ast":null,"code":"import React,{useState,useEffect}from'react';import{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';import axios from'axios';import Login from'./pages/Login.tsx';import Register from'./pages/Register.tsx';import Dashboard from'./pages/Dashboard.tsx';import ManagerDashboard from'./pages/ManagerDashboard.tsx';import CounselorDashboard from'./pages/CounselorDashboard.tsx';import CompanyAdminDashboard from'./pages/CompanyAdminDashboard.tsx';import SuperAdminDashboard from'./pages/SuperAdminDashboard.tsx';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{checkAuthStatus();},[]);const checkAuthStatus=async()=>{console.log('Checking auth status...');const token=localStorage.getItem('token');if(token){try{console.log('Token found, checking profile...');const response=await axios.get('http://localhost:3000/api/users/profile',{headers:{Authorization:\"Bearer \".concat(token)},timeout:10000// 10초 timeout으로 증가\n});console.log('Profile loaded:',response.data);setUser(response.data);}catch(error){console.error('Auth check failed:',error);localStorage.removeItem('token');}}else{console.log('No token found');}console.log('Setting loading to false');setLoading(false);};const handleLogin=userData=>{setUser(userData);};const handleLogout=()=>{setUser(null);};if(loading){return/*#__PURE__*/_jsx(\"div\",{style:{minHeight:'100vh',display:'flex',alignItems:'center',justifyContent:'center',backgroundColor:'#f5f5f5'},children:/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center'},children:[/*#__PURE__*/_jsx(\"h2\",{style:{color:'#333'},children:\"EAP Service \\uB85C\\uB529 \\uC911...\"}),/*#__PURE__*/_jsx(\"div\",{style:{width:'50px',height:'50px',border:'3px solid #f3f3f3',borderTop:'3px solid #1976d2',borderRadius:'50%',animation:'spin 1s linear infinite',margin:'20px auto'}})]})});}return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:user?/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\",replace:true}):/*#__PURE__*/_jsx(Login,{onLogin:handleLogin})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:user?/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\",replace:true}):/*#__PURE__*/_jsx(Register,{onLogin:handleLogin})}),/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",element:user?user.role==='super-admin'?/*#__PURE__*/_jsx(Navigate,{to:\"/super-admin\",replace:true}):user.role==='counselor'?/*#__PURE__*/_jsx(Navigate,{to:\"/counselor\",replace:true}):user.role==='manager'?/*#__PURE__*/_jsx(Navigate,{to:\"/manager\",replace:true}):user.role==='company-admin'?/*#__PURE__*/_jsx(Navigate,{to:\"/company-admin\",replace:true}):/*#__PURE__*/_jsx(Dashboard,{user:user,onLogout:handleLogout}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"/manager\",element:user?/*#__PURE__*/_jsx(ManagerDashboard,{user:user,onLogout:handleLogout}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"/counselor\",element:user?/*#__PURE__*/_jsx(CounselorDashboard,{user:user,onLogout:handleLogout}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"/company-admin\",element:user?/*#__PURE__*/_jsx(CompanyAdminDashboard,{user:user,onLogout:handleLogout}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"/super-admin\",element:user?/*#__PURE__*/_jsx(SuperAdminDashboard,{user:user,onLogout:handleLogout}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true})})]})})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Routes","Route","Navigate","axios","Login","Register","Dashboard","ManagerDashboard","CounselorDashboard","CompanyAdminDashboard","SuperAdminDashboard","jsx","_jsx","jsxs","_jsxs","App","user","setUser","loading","setLoading","checkAuthStatus","console","log","token","localStorage","getItem","response","get","headers","Authorization","concat","timeout","data","error","removeItem","handleLogin","userData","handleLogout","style","minHeight","display","alignItems","justifyContent","backgroundColor","children","textAlign","color","width","height","border","borderTop","borderRadius","animation","margin","className","path","element","to","replace","onLogin","role","onLogout"],"sources":["C:/Users/newsh/test-project/eap-service/frontend/src/App.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\nimport axios from 'axios';\nimport Login from './pages/Login.tsx';\nimport Register from './pages/Register.tsx';\nimport Dashboard from './pages/Dashboard.tsx';\nimport ManagerDashboard from './pages/ManagerDashboard.tsx';\nimport CounselorDashboard from './pages/CounselorDashboard.tsx';\nimport CompanyAdminDashboard from './pages/CompanyAdminDashboard.tsx';\nimport SuperAdminDashboard from './pages/SuperAdminDashboard.tsx';\n\nfunction App() {\n  const [user, setUser] = useState<any>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    checkAuthStatus();\n  }, []);\n\n  const checkAuthStatus = async () => {\n    console.log('Checking auth status...');\n    const token = localStorage.getItem('token');\n    if (token) {\n      try {\n        console.log('Token found, checking profile...');\n        const response = await axios.get('http://localhost:3000/api/users/profile', {\n          headers: { Authorization: `Bearer ${token}` },\n          timeout: 10000  // 10초 timeout으로 증가\n        });\n        console.log('Profile loaded:', response.data);\n        setUser(response.data);\n      } catch (error) {\n        console.error('Auth check failed:', error);\n        localStorage.removeItem('token');\n      }\n    } else {\n      console.log('No token found');\n    }\n    console.log('Setting loading to false');\n    setLoading(false);\n  };\n\n  const handleLogin = (userData: any) => {\n    setUser(userData);\n  };\n\n  const handleLogout = () => {\n    setUser(null);\n  };\n\n\n  if (loading) {\n    return (\n      <div style={{ \n        minHeight: '100vh', \n        display: 'flex', \n        alignItems: 'center', \n        justifyContent: 'center',\n        backgroundColor: '#f5f5f5'\n      }}>\n        <div style={{ textAlign: 'center' }}>\n          <h2 style={{ color: '#333' }}>EAP Service 로딩 중...</h2>\n          <div style={{ \n            width: '50px', \n            height: '50px', \n            border: '3px solid #f3f3f3',\n            borderTop: '3px solid #1976d2',\n            borderRadius: '50%',\n            animation: 'spin 1s linear infinite',\n            margin: '20px auto'\n          }}></div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <Router>\n      <div className=\"App\">\n        <Routes>\n          <Route\n            path=\"/login\"\n            element={\n              user ? <Navigate to=\"/dashboard\" replace /> : <Login onLogin={handleLogin} />\n            }\n          />\n          <Route\n            path=\"/register\"\n            element={\n              user ? <Navigate to=\"/dashboard\" replace /> : <Register onLogin={handleLogin} />\n            }\n          />\n          <Route\n            path=\"/dashboard\"\n            element={\n              user ? (\n                user.role === 'super-admin' ? <Navigate to=\"/super-admin\" replace /> :\n                user.role === 'counselor' ? <Navigate to=\"/counselor\" replace /> :\n                user.role === 'manager' ? <Navigate to=\"/manager\" replace /> :\n                user.role === 'company-admin' ? <Navigate to=\"/company-admin\" replace /> :\n                <Dashboard user={user} onLogout={handleLogout} />\n              ) : <Navigate to=\"/login\" replace />\n            }\n          />\n          <Route\n            path=\"/manager\"\n            element={\n              user ? <ManagerDashboard user={user} onLogout={handleLogout} /> : <Navigate to=\"/login\" replace />\n            }\n          />\n          <Route\n            path=\"/counselor\"\n            element={\n              user ? <CounselorDashboard user={user} onLogout={handleLogout} /> : <Navigate to=\"/login\" replace />\n            }\n          />\n          <Route\n            path=\"/company-admin\"\n            element={\n              user ? <CompanyAdminDashboard user={user} onLogout={handleLogout} /> : <Navigate to=\"/login\" replace />\n            }\n          />\n          <Route\n            path=\"/super-admin\"\n            element={\n              user ? <SuperAdminDashboard user={user} onLogout={handleLogout} /> : <Navigate to=\"/login\" replace />\n            }\n          />\n          <Route path=\"/\" element={<Navigate to=\"/login\" replace />} />\n        </Routes>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}