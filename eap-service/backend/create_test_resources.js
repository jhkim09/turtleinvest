const mongoose = require('mongoose');
const User = require('./models/User');
const Resource = require('./models/Resource');
require('dotenv').config();

async function createTestResources() {
  try {
    await mongoose.connect(process.env.MONGODB_URI);
    console.log('MongoDB 연결 성공');
    
    // 수퍼어드민 계정 확인
    const superAdmin = await User.findOne({ email: 'admin@test.com' });
    
    if (!superAdmin) {
      console.log('❌ 수퍼어드민 계정이 없습니다.');
      return;
    }
    
    console.log('✅ 수퍼어드민 계정 확인:', superAdmin.name);
    
    // 기존 자료 삭제
    await Resource.deleteMany({});
    console.log('기존 자료 삭제 완료');
    
    // 테스트 자료 데이터
    const testResources = [
      {
        title: '직장 내 스트레스 관리 가이드',
        content: `# 직장 내 스트레스 관리 완벽 가이드

## 스트레스의 원인 파악하기

직장에서 발생하는 스트레스의 주요 원인들을 파악하는 것이 첫 번째 단계입니다.

### 일반적인 스트레스 원인
- 과도한 업무량과 시간 압박
- 불분명한 업무 지시사항
- 상사나 동료와의 갈등
- 일과 생활의 균형 부족
- 직장 내 소통 부족

## 효과적인 스트레스 해소 방법

### 1. 호흡법 활용하기
깊고 천천한 호흡을 통해 즉각적인 스트레스 완화가 가능합니다.
- 4초간 숨을 들이마시고
- 7초간 숨을 참은 후
- 8초간 천천히 내쉬는 방법을 반복하세요

### 2. 시간 관리 기술
- 우선순위 설정하기
- 업무 일정 계획하기
- 적절한 휴식 시간 확보하기

### 3. 긍정적 사고 연습
- 부정적 생각 패턴 인식하기
- 현실적이고 균형잡힌 시각 유지하기
- 성취에 대한 인정과 칭찬하기

## 전문가 도움이 필요한 경우

다음과 같은 증상이 지속된다면 전문 상담을 받아보세요:
- 지속적인 불안감과 우울감
- 수면 장애나 식욕 변화
- 집중력 저하
- 신체적 증상 (두통, 소화불량 등)

상담사와 함께 개인맞춤형 스트레스 관리 계획을 수립할 수 있습니다.`,
        category: '심리건강',
        author: superAdmin._id,
        isPinned: true,
        priority: 'high',
        tags: ['스트레스', '정신건강', '업무효율', '자기관리'],
        links: [
          {
            title: '스트레스 자가진단 테스트',
            url: 'https://example.com/stress-test',
            description: '간단한 질문을 통해 현재 스트레스 수준을 확인해보세요'
          },
          {
            title: '명상 앱 추천',
            url: 'https://example.com/meditation-app',
            description: '일상에서 쉽게 활용할 수 있는 명상 애플리케이션'
          }
        ]
      },
      {
        title: '재무 계획 수립의 첫걸음: 가계부 작성법',
        content: `# 효과적인 가계부 작성법

## 가계부 작성의 중요성

가계부는 개인 재무 관리의 기초입니다. 수입과 지출을 체계적으로 기록함으로써:
- 소비 패턴 파악
- 불필요한 지출 발견
- 저축 목표 설정 가능
- 투자 자금 확보

## 가계부 작성 단계별 가이드

### 1단계: 고정 수입 파악
- 월급, 부업 수입
- 이자 수입, 배당금
- 기타 정기적 수입

### 2단계: 고정 지출 정리
- 주거비 (전세, 월세, 관리비)
- 보험료
- 통신비
- 대출 상환금

### 3단계: 변동 지출 추적
- 식비
- 교통비
- 의료비
- 여가비
- 기타 생활비

### 4단계: 저축 및 투자
- 비상 자금
- 목적별 저축
- 투자 자금

## 디지털 도구 활용하기

### 추천 앱
- 토스 가계부
- 뱅크샐러드
- MoneyManager

### 엑셀 템플릿 활용
기본적인 수입/지출 카테고리를 설정하고 매일 기록하는 습관을 만드세요.

## 가계부 작성 팁

1. **매일 기록하기**: 영수증을 모아두었다가 주말에 한꺼번에 정리하지 말고, 가능한 그날그날 기록하세요.

2. **카테고리 세분화**: 지출 항목을 너무 세분화하면 관리가 어려워집니다. 5-7개 정도의 대분류로 시작하세요.

3. **목표 설정**: 단순히 기록만 하지 말고, 월별 지출 목표를 설정하고 달성 여부를 점검하세요.

4. **정기적 검토**: 월 단위로 가계부를 검토하여 소비 패턴을 분석하고 개선점을 찾아보세요.`,
        category: '재무관리',
        author: superAdmin._id,
        isPinned: false,
        priority: 'normal',
        tags: ['가계부', '재무계획', '저축', '투자', '자산관리'],
        links: [
          {
            title: '가계부 엑셀 템플릿 다운로드',
            url: 'https://example.com/excel-template',
            description: '바로 사용할 수 있는 가계부 엑셀 파일'
          }
        ]
      },
      {
        title: '효과적인 업무 커뮤니케이션 스킬',
        content: `# 직장에서의 효과적인 커뮤니케이션

## 커뮤니케이션의 기본 원칙

### 1. 명확하고 간결한 표현
- 핵심 내용을 앞서 말하기
- 전문용어 남용 피하기
- 구체적인 예시 활용하기

### 2. 적극적 경청
- 상대방의 말을 끝까지 듣기
- 질문으로 이해도 확인하기
- 비언어적 신호도 주의 깊게 관찰하기

### 3. 상황에 맞는 커뮤니케이션 방식
- 대면, 전화, 이메일, 메신저의 적절한 활용
- 긴급성과 중요도에 따른 매체 선택
- 공식적/비공식적 상황 구분

## 어려운 대화 상황 대처법

### 갈등 상황에서의 커뮤니케이션
1. 감정적 반응 자제하기
2. 문제와 사람을 분리하여 생각하기
3. 공통의 목표 찾기
4. 해결책 중심으로 대화하기

### 피드백 주고받기
- 건설적 비판의 방법
- 칭찬과 개선점의 균형
- 구체적 사례 기반 피드백

## 온라인 커뮤니케이션 에티켓

### 화상회의 매너
- 음소거 기본 설정
- 적절한 배경과 조명
- 간결한 발언

### 업무 메신저 활용법
- 명확한 제목 설정
- 적절한 이모티콘 사용
- 업무 시간 존중

## 상사와의 효과적인 소통

### 보고의 기술
- 결론부터 말하기 (Bottom Line Up Front)
- 데이터와 근거 제시
- 대안과 권고사항 포함

### 요청과 건의
- 배경 상황 설명
- 기대 효과 제시
- 실행 가능한 계획 포함`,
        category: '직장생활',
        author: superAdmin._id,
        isPinned: false,
        priority: 'normal',
        tags: ['커뮤니케이션', '업무효율', '대인관계', '소통']
      },
      {
        title: '개인정보보호와 보안 관리 가이드',
        content: `# 직장에서의 개인정보보호 및 보안 관리

## 개인정보보호의 중요성

### 법적 요구사항
- 개인정보보호법 준수
- 회사 보안 정책 이해
- 고객 정보 보호 의무

### 보안 위협 유형
- 피싱 메일과 악성코드
- 사회공학적 공격
- 내부 정보 유출
- USB 및 이동저장장치 위험

## 기본 보안 수칙

### 1. 패스워드 관리
- 복잡한 비밀번호 설정
- 정기적인 비밀번호 변경
- 다중 인증 시스템 활용
- 비밀번호 관리 도구 사용

### 2. 이메일 보안
- 수신자 확인 후 전송
- 첨부파일 암호화
- 의심스러운 메일 신고
- 개인 이메일과 업무 이메일 분리

### 3. 물리적 보안
- 화면 잠금 설정
- 문서 보관 관리
- 방문자 출입 통제
- 청소 구역 보안

## 개인정보 처리 원칙

### 수집 및 이용
- 목적 명확화
- 최소한의 정보만 수집
- 동의 절차 준수
- 보관 기간 설정

### 제공 및 위탁
- 제3자 제공 시 동의
- 위탁업체 관리 감독
- 국외 이전 시 별도 동의

## 보안 사고 대응

### 사고 발생 시 행동 요령
1. 즉시 상급자 보고
2. 피해 범위 파악
3. 증거 보전
4. 대응 조치 실행
5. 재발 방지 대책 수립

### 정기적 보안 교육
- 월 1회 보안 교육 참석
- 최신 보안 위협 정보 습득
- 보안 의식 제고`,
        category: '법률정보',
        author: superAdmin._id,
        isPinned: false,
        priority: 'high',
        tags: ['개인정보보호', '보안', '법적준수', '위험관리']
      },
      {
        title: '직장인 건강 관리 완전 가이드',
        content: `# 직장인을 위한 건강 관리 가이드

## 사무직 직장인의 건강 문제

### 주요 건강 위험 요소
- 장시간 앉아있는 생활
- 불규칙한 식사 패턴
- 스트레스와 수면 부족
- 운동 부족
- 눈의 피로와 거북목 증후군

## 올바른 자세와 스트레칭

### 올바른 앉는 자세
- 등받이에 등을 완전히 기대기
- 발을 바닥에 평평하게 놓기
- 모니터는 눈높이와 맞추기
- 키보드와 마우스 위치 조절

### 사무실에서 할 수 있는 간단 스트레칭
1. **목과 어깨 스트레칭** (5분)
   - 목을 좌우로 천천히 돌리기
   - 어깨를 위아래로 올렸다 내리기

2. **허리 스트레칭** (3분)
   - 의자에 앉아 허리 비틀기
   - 앞으로 숙여 허리 늘이기

3. **다리 스트레칭** (5분)
   - 의자에 앉아 다리 뻗기
   - 발목 돌리기

## 건강한 식습관

### 규칙적인 식사
- 아침 식사 거르지 않기
- 점심시간 확보하여 천천히 먹기
- 저녁 과식 피하기

### 건강한 간식 선택
- 견과류, 과일
- 요구르트
- 물 충분히 마시기 (하루 8잔 이상)

## 스트레스 관리

### 업무 스트레스 해소법
- 잠시 자리에서 일어나 걷기
- 심호흡하기
- 동료와 대화하기
- 휴게시간 활용하기

### 퇴근 후 스트레스 해소
- 취미 활동
- 가벼운 운동
- 독서나 음악 감상
- 충분한 수면 (7-8시간)

## 정기 건강검진

### 연 1회 종합검진
- 기본 건강검진 항목
- 직업병 관련 검사
- 연령대별 추가 검사

### 자가 건강 체크
- 일주일에 한 번 체중 측정
- 혈압 정기 확인
- 스트레스 수준 점검

## 직장 내 건강 증진 프로그램

### 회사 복리후생 활용
- 피트니스 센터 이용
- 건강 강좌 참석
- 금연/금주 프로그램
- 건강한 구내식당 메뉴

건강은 개인의 노력과 회사의 지원이 함께할 때 더욱 효과적입니다.`,
        category: '건강관리',
        author: superAdmin._id,
        isPinned: false,
        priority: 'normal',
        tags: ['건강관리', '스트레칭', '식습관', '운동', '직장인건강'],
        links: [
          {
            title: '직장인 스트레칭 동영상',
            url: 'https://example.com/stretching-video',
            description: '책상에서 할 수 있는 5분 스트레칭'
          },
          {
            title: '건강한 도시락 레시피',
            url: 'https://example.com/healthy-lunchbox',
            description: '영양 균형을 고려한 도시락 메뉴'
          }
        ]
      },
      {
        title: '자기계발과 경력 관리 로드맵',
        content: `# 직장인 자기계발 완벽 가이드

## 자기계발의 필요성

### 변화하는 직장 환경
- 디지털 전환 가속화
- 새로운 기술과 도구의 등장
- 원격 근무와 하이브리드 워크
- 평생 학습의 중요성 증대

## 스킬 개발 영역

### 1. 하드 스킬 (Technical Skills)
- 업무 관련 전문 지식
- IT 도구 활용 능력
- 데이터 분석 스킬
- 외국어 능력

### 2. 소프트 스킬 (Soft Skills)
- 커뮤니케이션 능력
- 리더십과 팀워크
- 문제 해결 능력
- 창의적 사고

### 3. 디지털 리터러시
- 기본적인 프로그래밍 이해
- 클라우드 서비스 활용
- 인공지능 도구 활용
- 사이버 보안 의식

## 효과적인 학습 방법

### 온라인 학습 플랫폼 활용
- Coursera, edX 등 MOOC 플랫폼
- LinkedIn Learning
- 유튜브 교육 채널
- 회사 내부 교육 시스템

### 오프라인 학습 기회
- 직무 관련 세미나와 컨퍼런스
- 전문 자격증 취득
- 동호회나 스터디 그룹 참여
- 멘토링 프로그램

## 경력 관리 전략

### 경력 목표 설정
1. **5년 후 목표 설정**
   - 희망하는 직책과 역할
   - 필요한 핵심 역량
   - 예상 연봉 수준

2. **역량 갭 분석**
   - 현재 보유 역량
   - 목표 달성 필요 역량
   - 부족한 부분 파악

### 네트워킹 구축
- 업계 전문가와의 관계 구축
- 사내 네트워킹 활동 참여
- SNS를 통한 전문적 관계 형성
- 동문회나 직장인 모임 참여

## 시간 관리와 학습 계획

### 일과 학습의 균형
- 출근 전 30분 활용
- 점심시간 일부 활용
- 퇴근 후 1-2시간 투자
- 주말 집중 학습 시간

### 학습 계획 수립
- 월별 학습 목표 설정
- 주간 학습 스케줄 작성
- 진도 체크와 평가
- 유연한 계획 조정

## 성과 측정과 피드백

### 학습 성과 측정
- 자격증이나 수료증 취득
- 실무 적용 사례 만들기
- 동료나 상사의 피드백
- 연봉이나 승진 기회 변화

자기계발은 지속적인 과정입니다. 꾸준한 노력과 실천이 핵심입니다.`,
        category: '자기계발',
        author: superAdmin._id,
        isPinned: false,
        priority: 'normal',
        tags: ['자기계발', '경력관리', '스킬개발', '학습', '성장'],
        links: [
          {
            title: '무료 온라인 강의 모음',
            url: 'https://example.com/free-courses',
            description: '직장인에게 유용한 무료 강의 링크 모음'
          },
          {
            title: '자기계발 도서 추천',
            url: 'https://example.com/self-development-books',
            description: '경력 개발에 도움되는 필독서 리스트'
          }
        ]
      },
      {
        title: '회사 복리후생 이용 가이드',
        content: `# 복리후생 100% 활용하기

## 주요 복리후생 제도

### 1. 건강 관리 지원
- 건강검진비 지원
- 의료비 지원
- 헬스장 이용료 지원
- 심리 상담 서비스

### 2. 교육 및 자기계발
- 교육비 지원
- 도서구입비 지원
- 외부 세미나 참석비
- 어학연수 지원

### 3. 여가 및 문화생활
- 영화 할인 쿠폰
- 문화공연 관람 지원
- 여행비 지원
- 동호회 활동 지원

## 신청 방법과 절차

### 온라인 신청 시스템
1. 사내 포털 접속
2. 복리후생 메뉴 선택
3. 해당 항목 신청
4. 필요 서류 첨부
5. 승인 대기

### 필요 서류 준비
- 영수증 및 증빙 자료
- 신청서 작성
- 상사 결재 (일정 금액 이상)

## 놓치기 쉬운 혜택들

### 연말정산 관련
- 의료비 소득공제
- 교육비 소득공제
- 기부금 소득공제

### 특별 휴가제도
- 리프레시 휴가
- 자기계발 휴가
- 가족돌봄 휴가

## 효과적인 활용 팁

### 연간 계획 수립
- 1월에 연간 복리후생 이용 계획 세우기
- 분기별 목표 설정
- 정기적인 사용 현황 점검

### 동료들과 정보 공유
- 복리후생 이용 후기 공유
- 추천 업체나 서비스 정보 교환
- 공동 신청으로 할인 혜택 누리기`,
        category: '복리후생',
        author: superAdmin._id,
        isPinned: false,
        priority: 'low',
        tags: ['복리후생', '혜택', '절약', '활용법']
      },
      {
        title: '[긴급] 개인정보 보안 업데이트 안내',
        content: `# 개인정보 보안 강화 조치 안내

## 긴급 보안 업데이트

최근 해킹 시도가 증가함에 따라 다음과 같은 보안 조치를 즉시 시행해주시기 바랍니다.

### 즉시 시행 사항
1. **비밀번호 즉시 변경**
   - 사내 시스템 모든 계정
   - 업무 관련 외부 서비스

2. **이중 인증 활성화**
   - 가능한 모든 시스템에서 2FA 설정
   - 인증 앱 설치 권장

3. **의심스러운 활동 즉시 신고**
   - IT 보안팀: 내선 1234
   - 보안 이메일: security@company.com

### 금주 내 완료 사항
- 보안 교육 이수
- 개인정보 처리 현황 점검
- USB 및 외부 저장장치 보안 점검

본 조치는 전 직원 필수 이행사항입니다.`,
        category: '기타',
        author: superAdmin._id,
        isPinned: true,
        priority: 'urgent',
        tags: ['보안', '긴급', '필수이행', '해킹방지'],
        visibility: 'all'
      }
    ];
    
    // 자료 생성
    for (let i = 0; i < testResources.length; i++) {
      const resource = new Resource({
        ...testResources[i],
        publishedAt: new Date(Date.now() - (i * 24 * 60 * 60 * 1000)), // 하루씩 이전 날짜로 설정
        viewCount: Math.floor(Math.random() * 100) + 1,
        status: 'published',
        visibility: testResources[i].visibility || 'all'
      });
      
      await resource.save();
      console.log(`✅ 자료 생성: ${resource.title}`);
    }
    
    console.log(`\n✅ 총 ${testResources.length}개의 테스트 자료가 생성되었습니다.`);
    
    // 생성된 자료 통계
    const totalResources = await Resource.countDocuments({ status: 'published' });
    const pinnedResources = await Resource.countDocuments({ status: 'published', isPinned: true });
    const categoryStats = await Resource.aggregate([
      { $match: { status: 'published' } },
      { $group: { _id: '$category', count: { $sum: 1 } } },
      { $sort: { count: -1 } }
    ]);
    
    console.log('\n📊 생성된 자료 통계:');
    console.log(`총 자료 수: ${totalResources}개`);
    console.log(`고정 자료: ${pinnedResources}개`);
    console.log('\n카테고리별 분포:');
    categoryStats.forEach(stat => {
      console.log(`${stat._id}: ${stat.count}개`);
    });
    
    await mongoose.disconnect();
    console.log('\n작업 완료!');
    
  } catch (error) {
    console.error('❌ 오류:', error.message);
    await mongoose.disconnect();
  }
}

createTestResources();